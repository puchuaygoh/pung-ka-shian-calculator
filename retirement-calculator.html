<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à: ‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡∏û‡∏∏‡∏á‡πÄ‡∏Å‡∏©‡∏µ‡∏¢‡∏ì - ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÇ‡∏Å‡πä‡∏∞</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ========== 1. CSS (‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå) ========== */
        
        body {
            font-family: 'Kanit', sans-serif;
            background-color: #f5f6fa;
            color: #34495e;
            display: grid;
            place-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background-color: #ffffff;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            border: 1px solid #e0e0e0;
        }

        /* --- ‡∏™‡πà‡∏ß‡∏ô Header --- */
        .header {
            background-color: #00B894; /* ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß Teal */
            color: white;
            padding: 24px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2rem;
        }
        .header .mascot-header {
            width: 100px;
            height: auto;
            margin-top: 15px;
            border-radius: 50%;
        }

        /* --- Wizard Form Container --- */
        .calculator-wizard {
            padding: 32px;
        }

        /* --- Progress Bar --- */
        .progress-bar {
            display: flex;
            height: 10px;
            background-color: #eee;
            border-radius: 5px;
            margin-bottom: 24px;
            overflow: hidden;
        }
        .progress-step {
            width: 20%; /* 100% / 5 steps */
            height: 100%;
            background-color: #00B894;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .progress-step.active {
            opacity: 1;
        }

        /* --- Wizard Steps --- */
        .wizard-step {
            display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å Step ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô */
            animation: fadeIn 0.5s;
        }
        .wizard-step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Form Elements --- */
        .form-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 20px;
        }
        .form-group label {
            margin-bottom: 12px;
            font-weight: 700;
            color: #34495e;
            font-size: 1.25rem; /* ‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
            text-align: center;
        }
        .form-group input {
            padding: 14px 18px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1rem;
            font-family: 'Kanit', sans-serif;
            color: #34495e;
            text-align: center;
        }
        .form-group input:focus {
            outline: none;
            border-color: #00B894;
            box-shadow: 0 0 0 3px rgba(0,184,148,0.2);
        }

        /* --- Navigation Buttons --- */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 24px;
        }
        .nav-buttons button {
            font-family: 'Kanit', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .prev-btn {
            background-color: #eee;
            color: #555;
        }
        .prev-btn:hover {
            background-color: #ddd;
        }
        .next-btn {
            background-color: #4CAF50; /* ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏™‡∏î‡πÉ‡∏™ */
            color: white;
        }
        .next-btn:hover {
            background-color: #43a047;
        }
        .submit-btn {
            background-color: #d9534f; /* ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢! */
            color: white;
        }
        .submit-btn:hover {
            background-color: #c9302c;
        }

        /* --- Loading Step --- */
        .loading-step {
            text-align: center;
            padding: 40px 0;
        }
        .loader {
            border: 8px solid #f3f3f3;
            border-top: 8px solid #00B894;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .loading-step p {
            font-size: 1.1rem;
            color: #555;
        }

        /* --- ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (Output) --- */
        .results-area {
            display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô */
            padding: 24px;
            text-align: center;
            border-top: 1px solid #e0e0e0;
            animation: fadeIn 0.5s;
        }
        .results-area .mascot-result {
            width: 120px;
            height: auto;
            margin-bottom: 15px;
        }
        .results-area .size-display {
            font-size: 3.5rem;
            font-weight: 700;
            margin: 0;
        }
        .results-area .mascot-message {
            font-size: 1.25rem;
            margin: 10px 0;
            color: #34495e;
        }
        .results-area .gap-message {
            font-size: 1.1rem;
            color: #555;
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 8px;
        }
        .results-area .gap-message span {
            font-weight: 700;
            font-size: 1.25rem;
        }
        .results-area .size-S { color: #4CAF50; } /* Fit */
        .results-area .size-M { color: #f0ad4e; } /* M */
        .results-area .size-L { color: #d9534f; } /* L */
        .results-area .size-XL { color: #c9302c; } /* XL */

        /* --- ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡πâ‡∏≤‡∏ß‡∏ï‡πà‡∏≠‡πÑ‡∏õ (Next Steps) --- */
        .next-steps {
            background-color: #fdfdfd;
            border-top: 1px solid #e0e0e0;
            padding: 24px;
        }
        .next-steps h3 {
            text-align: center;
            margin-top: 0;
            font-size: 1.5rem;
            color: #00B894;
        }
        .lead-magnet {
            background-color: #fff0f3; /* ‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡∏≠‡πà‡∏≠‡∏ô */
            border: 1px dashed #FFC0CB;
            border-radius: 8px;
            padding: 16px;
            text-align: center;
        }
        .lead-magnet p {
            font-weight: 700;
            margin: 0 0 15px;
            color: #34495e;
            font-size: 1.2rem;
        }
        .lead-magnet button {
            background-color: #FFC0CB; /* ‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡∏û‡∏≤‡∏™‡πÄ‡∏ó‡∏• */
            color: #34495e;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-family: 'Kanit', sans-serif;
            font-weight: 700;
            cursor: pointer;
            font-size: 1.1rem;
        }
        .lead-magnet button:hover {
            background-color: #ffafc0;
        }

    </style>
</head>
<body>

    <div class="container">
        
        <header class="header">
            <img src="mascot.png" alt="Mascot ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÇ‡∏Å‡πä‡∏∞" class="mascot-header">
            <h1>ü§∏‚Äç‚ôÇÔ∏è ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à: ‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡∏û‡∏∏‡∏á‡πÄ‡∏Å‡∏©‡∏µ‡∏¢‡∏ì!</h1>
        </header>

        <form class="calculator-wizard" id="wizard-form">

            <div class="progress-bar">
                <div class="progress-step active" id="p-step-1"></div>
                <div class="progress-step" id="p-step-2"></div>
                <div class="progress-step" id="p-step-3"></div>
                <div class="progress-step" id="p-step-4"></div>
                <div class="progress-step" id="p-step-5"></div>
            </div>
            
            <div class="wizard-step active" id="step-1">
                <div class="form-group">
                    <label for="currentAge">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! '‡πÇ‡∏Å‡πä‡∏∞' ‡∏Ç‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏° '‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢' ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö...<br>‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏£‡∏±‡∏ö?</label>
                    <input type="number" id="currentAge" placeholder="‡πÄ‡∏ä‡πà‡∏ô 30" required>
                </div>
                <div class="nav-buttons" style="justify-content: flex-end;">
                    <button type="button" class="next-btn" onclick="nextPrev(1)">‡∏ï‡πà‡∏≠‡πÑ‡∏õ ></button>
                </div>
            </div>

            <div class="wizard-step" id="step-2">
                <div class="form-group">
                    <label for="retirementAge">‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏Ñ‡∏£‡∏±‡∏ö! ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏∏‡∏ì '‡∏ù‡∏±‡∏ô' ‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏Å‡∏©‡∏µ‡∏¢‡∏ì‡∏ï‡∏≠‡∏ô‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏£‡∏±‡∏ö?</label>
                    <input type="number" id="retirementAge" placeholder="‡πÄ‡∏ä‡πà‡∏ô 60" required>
                </div>
                <div class="nav-buttons">
                    <button type="button" class="prev-btn" onclick="nextPrev(-1)">&lt; ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <button type="button" class="next-btn" onclick="nextPrev(1)">‡∏ï‡πà‡∏≠‡πÑ‡∏õ ></button>
                </div>
            </div>

            <div class="wizard-step" id="step-3">
                <div class="form-group">
                    <label for="monthlyExpenses">‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏ä‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏™‡∏ö‡∏≤‡∏¢‡πÜ ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏•‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏£‡∏±‡∏ö? (‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ)</label>
                    <input type="number" id="monthlyExpenses" placeholder="‡πÄ‡∏ä‡πà‡∏ô 30000" required>
                </div>
                <div class="nav-buttons">
                    <button type="button" class="prev-btn" onclick="nextPrev(-1)">&lt; ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <button type="button" class="next-btn" onclick="nextPrev(1)">‡∏ï‡πà‡∏≠‡πÑ‡∏õ ></button>
                </div>
            </div>

            <div class="wizard-step" id="step-4">
                <div class="form-group">
                    <label for="currentSavings">‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ '‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠' (‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡πá‡∏ö/‡∏•‡∏á‡∏ó‡∏∏‡∏ô) ‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏£‡∏±‡∏ö?</label>
                    <input type="number" id="currentSavings" placeholder="‡πÄ‡∏ä‡πà‡∏ô 500000" required>
                </div>
                <div class="nav-buttons">
                    <button type="button" class="prev-btn" onclick="nextPrev(-1)">&lt; ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <button type="button" class="next-btn" onclick="nextPrev(1)">‡∏ï‡πà‡∏≠‡πÑ‡∏õ ></button>
                </div>
            </div>

            <div class="wizard-step" id="step-5">
                <div class="form-group">
                    <label for="monthlySavings">‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏à‡∏∞ '‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠' (‡∏≠‡∏≠‡∏°/‡∏•‡∏á‡∏ó‡∏∏‡∏ô) ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏•‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏£‡∏±‡∏ö?</label>
                    <input type="number" id="monthlySavings" placeholder="‡πÄ‡∏ä‡πà‡∏ô 5000" required>
                </div>
                <div class="nav-buttons">
                    <button type="button" class="prev-btn" onclick="nextPrev(-1)">&lt; ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <button type="submit" class="submit-btn">‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡πÄ‡∏•‡∏¢!</button>
                </div>
            </div>

            <div class="wizard-step loading-step" id="step-6">
                <div class="loader"></div>
                <p>'‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÇ‡∏Å‡πä‡∏∞' ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢ '‡πÑ‡∏ã‡∏™‡πå‡∏û‡∏∏‡∏á' ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...
                <br><span style="font-size: 0.9rem;">(‡∏Ñ‡∏¥‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ü‡πâ‡∏≠ 3% ‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡∏•‡∏á‡∏ó‡∏∏‡∏ô 5% ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö)</span></p>
            </div>
            
        </form>
        
        <section class="results-area" id="results-area">
            <img src="mascot.png" alt="Mascot ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÇ‡∏Å‡πä‡∏∞" class="mascot-result" id="mascot-result-img">
            <h2 class="size-display" id="belly-size-display">‡πÑ‡∏ã‡∏™‡πå L</h2>
            <p class="mascot-message" id="mascot-message">‡πÇ‡∏≠‡πâ! ‡∏û‡∏∏‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà (L) ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö!</p>
            <p class="gap-message" id="gap-message">
                ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢... ‡πÅ‡∏ú‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏°‡∏µ '‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á' (Gap) ‡∏≠‡∏µ‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì
                <span id="gap-amount">7,500,000 ‡∏ö‡∏≤‡∏ó</span>
            </p>
        </section>

        <section class="next-steps" id="next-steps" style="display: none;">
            <h3>‡πÅ‡∏ú‡∏ô‡∏•‡∏î‡∏û‡∏∏‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì üöÄ</h3>
            <div class="lead-magnet">
                <p>‡∏£‡∏±‡∏ö‡∏ü‡∏£‡∏µ! E-book "5 ‡∏™‡∏π‡∏ï‡∏£‡∏•‡∏±‡∏ö‡∏™‡∏•‡∏≤‡∏¢‡∏û‡∏∏‡∏á‡πÄ‡∏Å‡∏©‡∏µ‡∏¢‡∏ì"</p>
                <button type="button" id="cta-button">‡πÅ‡∏≠‡∏î LINE '‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÇ‡∏Å‡πä‡∏∞' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏¢!</button>
            </div>
        </section>
        
    </div>


    <script>
        // --- 1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà (‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à!) ---
        const INFLATION_RATE = 0.03;         // ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ü‡πâ‡∏≠ (3%)
        const INVESTMENT_RETURN_RATE = 0.05; // ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô (5%)
        const WITHDRAWAL_RATE = 0.04;        // ‡∏Å‡∏é 4% Rule

        // --- 2. ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ Wizard ---
        let currentStep = 1;
        const steps = document.querySelectorAll(".wizard-step");
        const progressSteps = document.querySelectorAll(".progress-step");

        // --- 3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Elements ---
        const form = document.getElementById('wizard-form');
        const resultsArea = document.getElementById('results-area');
        const nextSteps = document.getElementById('next-steps');
        const sizeDisplay = document.getElementById('belly-size-display');
        const mascotMessage = document.getElementById('mascot-message');
        const gapAmount = document.getElementById('gap-amount');
        
        // --- 4. ‡∏õ‡∏∏‡πà‡∏° CTA ‡πÑ‡∏õ LINE OA ---
        const ctaButton = document.getElementById('cta-button');
        ctaButton.addEventListener('click', function() {
            // !! ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô 'YOUR_LINE_OA_LINK' ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå LINE OA ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì !!
            window.open('https://line.me/ti/p/@puchuaygoh', '_blank'); 
        });

        // --- 5. ‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢ Format ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç ---
        const formatter = new Intl.NumberFormat('th-TH', {
            style: 'decimal',
            maximumFractionDigits: 0,
        });

        // --- 6. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á Step ---
        function showStep(n) {
            steps.forEach(step => step.classList.remove('active'));
            document.getElementById(`step-${n}`).classList.add('active');

            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Progress Bar
            progressSteps.forEach((pStep, index) => {
                if (index < n) {
                    pStep.classList.add('active');
                } else {
                    pStep.classList.remove('active');
                }
            });
            currentStep = n;
        }

        // --- 7. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Next/Prev ---
        function nextPrev(n) {
            // Validate Input
            const currentStepInputs = steps[currentStep - 1].querySelectorAll("input");
            let isValid = true;
            currentStepInputs.forEach(input => {
                if (!input.value || parseFloat(input.value) < 0) {
                    input.style.borderColor = "#d9534f"; // ‡∏™‡∏µ‡πÅ‡∏î‡∏á
                    isValid = false;
                } else {
                    input.style.borderColor = "#ddd";
                }
            });

            if (n === 1 && !isValid) return false; // ‡∏ñ‡πâ‡∏≤‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡∏ï‡πà‡∏≠

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏Å‡∏©‡∏µ‡∏¢‡∏ì (Step 2)
            if (currentStep === 2 && n === 1) {
                const currentAge = parseFloat(document.getElementById('currentAge').value);
                const retirementAge = parseFloat(document.getElementById('retirementAge').value);
                if (retirementAge <= currentAge) {
                    alert('‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏Å‡∏©‡∏µ‡∏¢‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö');
                    document.getElementById('retirementAge').style.borderColor = "#d9534f";
                    return false;
                }
            }

            showStep(currentStep + n);
        }

        // --- 8. Event Listener ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î "‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡πÄ‡∏•‡∏¢!" (Submit) ---
        form.addEventListener('submit', function(event) {
            event.preventDefault(); // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà
            
            // Validate Step 5
            const lastInput = document.getElementById('monthlySavings');
            if (!lastInput.value || parseFloat(lastInput.value) < 0) {
                 lastInput.style.borderColor = "#d9534f";
                 alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö');
                 return;
            }

            // --- 9. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 5 ‡∏Ç‡πâ‡∏≠ ---
            const currentAge = parseFloat(document.getElementById('currentAge').value);
            const retirementAge = parseFloat(document.getElementById('retirementAge').value);
            const monthlyExpenses = parseFloat(document.getElementById('monthlyExpenses').value);
            const currentSavings = parseFloat(document.getElementById('currentSavings').value);
            const monthlySavings = parseFloat(document.getElementById('monthlySavings').value);

            // --- 10. ‡πÅ‡∏™‡∏î‡∏á Loading ---
            showStep(6); // ‡πÅ‡∏™‡∏î‡∏á Step 6 (Loading)

            // --- 11. ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì (‡∏â‡∏ö‡∏±‡∏ö‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î 5%) ---
            
            const yearsToRetirement = retirementAge - currentAge;
            const r = INVESTMENT_RETURN_RATE / 12; // ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô 5% ‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
            const n = yearsToRetirement * 12; // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏ß‡∏î (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)
            
            // 11.1: ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (Target Goal)
            // (FV ‡∏Ç‡∏≠‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ ‡πÇ‡∏î‡∏¢‡∏Ñ‡∏¥‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ü‡πâ‡∏≠ 3% -> ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì 4% Rule)
            const futureMonthlyExpenses = monthlyExpenses * Math.pow((1 + INFLATION_RATE), yearsToRetirement);
            const targetNestEggFuture = (futureMonthlyExpenses * 12) / WITHDRAWAL_RATE;

            // 11.2: ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (Projected Lump Sum)
            // (FV ‡∏Ç‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡πâ‡∏≠‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‡πÇ‡∏î‡∏¢‡∏Ñ‡∏¥‡∏î‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô 5%)
            const savingsFutureValue_LumpSum = currentSavings * Math.pow((1 + INVESTMENT_RETURN_RATE), yearsToRetirement);

            // 11.3: ‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (Projected Annuity)
            // (FV ‡∏Ç‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡πÇ‡∏î‡∏¢‡∏Ñ‡∏¥‡∏î‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô 5%)
            // FV = P * [ ((1+r)^n - 1) / r ]
            const savingsFutureValue_Annuity = monthlySavings * ( (Math.pow(1 + r, n) - 1) / r );

            // 11.4: "‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á" (The Gap)
            const totalProjectedSavings = savingsFutureValue_LumpSum + savingsFutureValue_Annuity;
            const gap = targetNestEggFuture - totalProjectedSavings;

            // --- 12. ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô "‡πÑ‡∏ã‡∏™‡πå‡∏û‡∏∏‡∏á" ---
            let bellySize = '';
            let message = '';
            let sizeClass = 'size-display';

            if (gap <= 0) {
                bellySize = '‡πÑ‡∏ã‡∏™‡πå S (Fit!)';
                message = "‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î! ‡πÅ‡∏ú‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì Fit ‡∏°‡∏≤‡∏Å! '‡∏û‡∏∏‡∏á‡πÄ‡∏Å‡∏©‡∏µ‡∏¢‡∏ì' ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö!";
                sizeClass += ' size-S';
            } else if (gap > 0 && gap <= 3000000) { // 3 ‡∏•‡πâ‡∏≤‡∏ô
                bellySize = '‡πÑ‡∏ã‡∏™‡πå M';
                message = "‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡πÄ‡∏•‡∏¢! ‡∏û‡∏∏‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡πá‡∏Å‡∏°‡∏≤‡∏Å (M) ‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡πá Fit ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö!";
                sizeClass += ' size-M';
            } else if (gap > 3000000 && gap <= 7000000) { // 7 ‡∏•‡πâ‡∏≤‡∏ô
                bellySize = '‡πÑ‡∏ã‡∏™‡πå L';
                message = "‡πÇ‡∏≠‡πâ! ‡∏û‡∏∏‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà (L) ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡πÅ‡∏ï‡πà '‡πÇ‡∏Å‡πä‡∏∞' ‡∏°‡∏µ‡πÅ‡∏ú‡∏ô‡∏•‡∏î‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏±‡∏ö!";
                sizeClass += ' size-L';
            } else { // ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 7 ‡∏•‡πâ‡∏≤‡∏ô
                bellySize = '‡πÑ‡∏ã‡∏™‡πå XL';
                message = "‡πÇ‡∏≠‡πâ‡πÇ‡∏Æ! ‡∏û‡∏∏‡∏á‡πÑ‡∏ã‡∏™‡πå XL ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤ '‡∏ö‡∏≥‡∏ö‡∏±‡∏î' ‡∏Å‡∏±‡∏ô‡∏î‡πà‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö!";
                sizeClass += ' size-XL';
            }

            // --- 13. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (Delay 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ) ---
            setTimeout(function() {
                // ‡∏ã‡πà‡∏≠‡∏ô Wizard
                form.style.display = 'none';

                // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
                sizeDisplay.textContent = bellySize;
                sizeDisplay.className = sizeClass;
                mascotMessage.textContent = message;

                if (gap <= 0) {
                    gapAmount.innerHTML = `‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ <span>${formatter.format(Math.abs(gap))} ‡∏ö‡∏≤‡∏ó</span>`;
                    gapAmount.style.color = '#4CAF50';
                } else {
                    gapAmount.innerHTML = `‡πÅ‡∏ú‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏°‡∏µ '‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á' (Gap) ‡∏≠‡∏µ‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì <span>${formatter.format(gap)} ‡∏ö‡∏≤‡∏ó</span>`;
                    gapAmount.style.color = '#d9534f';
                }

                resultsArea.style.display = 'block';
                nextSteps.style.display = 'block';
                
                resultsArea.scrollIntoView({ behavior: 'smooth' });

            }, 2000); // ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏¥‡∏î)
        });

        // --- 14. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Wizard ---
        showStep(1); // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà Step 1

    </script>

</body>
</html>
